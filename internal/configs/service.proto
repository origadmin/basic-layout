syntax = "proto3";

package origadmin.configs;

import "google/protobuf/duration.proto";
// Import from the new runtime API paths that exist in the 'third_party' directory
import "runtime/discovery/v1/discovery.proto";
import "runtime/middleware/v1/cors/cors.proto";
import "runtime/service/v1/service.proto";
import "runtime/storage/v1/storage.proto";

option go_package = "internal/configs;configs";

// This message is a legacy configuration structure and should be considered for deprecation.
// The definitions within `service.v1.Service`, `discovery.v1.Discovery`, etc., are now the primary source of truth.
message ServiceConfig {
  // GINS, HTTP, GRPC, and Websocket messages are kept for backward compatibility.
  // New projects should define servers directly within the `service.v1.Service` message.
  message GINS {
    string network = 1;
    string addr = 2;
    bool use_tls = 3;
    string cert_file = 4;
    string key_file = 5;
    optional google.protobuf.Duration timeout = 6;
  }

  message HTTP {
    string network = 1;
    string addr = 2;
    bool use_tls = 3;
    string cert_file = 4;
    string key_file = 5;
    optional google.protobuf.Duration timeout = 6;
  }

  message GRPC {
    string network = 1;
    string addr = 2;
    bool use_tls = 3;
    string cert_file = 4;
    string key_file = 5;
    optional google.protobuf.Duration timeout = 6;
  }

  message Websocket {
    string network = 1;
    string addr = 2;
    string path = 3;
    string codec = 4;
    optional google.protobuf.Duration timeout = 5;
  }

  GINS gins = 2;
  HTTP http = 3;
  GRPC grpc = 4;

  // The fields below are now defined in the imported runtime messages.
  // They are kept here for backward compatibility but should be migrated.

  // Replaced by middleware.v1.cors.Cors
  runtime.middleware.v1.cors.Cors cors = 100;

  // Replaced by discovery.v1.Discovery
  runtime.discovery.v1.Discovery registry = 200;

  // Replaced by storage.v1.Storage
  runtime.storage.v1.Storage data = 300;

  // Replaced by service.v1.Service
  runtime.service.v1.Service service = 500;
}
